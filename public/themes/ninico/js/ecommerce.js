(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function a(e,t,a){return(t=r(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(t){var a=function(t,a){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,a||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(t)}(t,"string");return"symbol"===e(a)?a:String(a)}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"$body",$(document.body)),a(this,"$productsFilter",this.$body.find("#products-filter"))}var r,n,o;return r=e,n=[{key:"init",value:function(){var e=this;this.$body.on("click",".add-to-cart:not(.cart-form button[type=submit])",(function(t){e.addToCart(t)})).on("click",".remove-cart-item",(function(t){e.removeFromCart(t)})).on("click",".btn-apply-coupon-code",(function(t){e.applyCouponCode(t)})).on("click",".btn-remove-coupon-code",(function(t){e.removeCouponCode(t)})).on("click",".product-quantity span",(function(t){e.changeCartQuantity(t)})).on("keyup",".product-quantity input",(function(t){e.onChangeQuantityInput(t)})).on("click",".add-to-compare",(function(t){e.addToCompare(t)})).on("click",".js-sale-popup-quick-view-button",(function(t){e.quickView(t)})).on("click",".tpproduct .quickview",(function(t){e.quickView(t)})).on("click",".tpproduct .button-quick-shop",(function(t){e.quickShop(t)})).on("click",".remove-compare-item",(function(t){e.removeFromCompare(t)})).on("click",".add-to-wishlist",(function(t){e.addToWishlist(t)})).on("click",".remove-wishlist-item",(function(t){e.removeFromWishlist(t)})).on("submit","#products-filter",(function(t){t.preventDefault(),e.filterProducts($(t.currentTarget),1)})).on("click",".product-area .basic-pagination ul li a",(function(t){e.handleProductsPagination(t)})).on("change",'.product-area .tp-shop-selector select[name="sort-by"]',(function(t){e.handleProductsSorting(t)})).on("change",'.product-area .tp-shop-selector select[name="per-page"]',(function(t){e.handleProductsPerPage(t)})).on("click",".product-area .product-filter-nav button",(function(t){e.handleProductsLayout(t)})).on("change","#products-filter select, input",(function(){e.$productsFilter.trigger("submit")})).on("click",".product-filter-button",(function(){e.$body.find(".product-filter-mobile").addClass("active")})).on("click",".product-filter-mobile .backdrop, .close-product-filter-mobile",(function(){e.$body.find(".product-filter-mobile").removeClass("active")})).on("click","form.cart-form button[type=submit]",(function(t){e.addProductToCart(t)})).on("click",".tpproduct-details__reviewers",(function(){e.$body.find(".tpproduct-details__nav #reviews-tab").trigger("click"),$("html, body").animate({scrollTop:$(".tpproduct-details__navtab").offset().top-100})})).on("click",".product-sidebar__list .f-right",(function(e){e.preventDefault(),$(e.currentTarget).closest(".category-filter").find(".product-sidebar__list").slideToggle()})),this.reviewSection(),this.priceFilter(),this.productGallery(),this.quickSearchProducts();var t=this;window.onBeforeChangeSwatches=function(e,t){var a=t.closest(".tpproduct-details__content"),r=a.find(".cart-form");a.find(".error-message").hide(),a.find(".success-message").hide(),a.find(".number-items-available").html("").hide();var n=r.find("button[type=submit]");e&&n.prop("disabled",!0)},window.onChangeSwatchesSuccess=function(e,a){var r=a.closest(".tpproduct-details__content"),n=r.find(".cart-form"),o=$(".footer-cart-form");if(e){var i=n.find("button[type=submit]");if(e.error)i.prop("disabled",!0),r.find(".number-items-available").html('<span class="text-danger">('.concat(e.message,")</span>")).show(),n.find(".hidden-product-id").val(""),o.find(".hidden-product-id").val("");else{var c=e.data,l=$(document).find(".tpproduct-details__price"),s=l.find(".product-price-sale"),d=l.find(".product-price-original");c.sale_price!==c.price?(s.removeClass("d-none"),d.addClass("d-none")):(s.addClass("d-none"),d.removeClass("d-none")),s.find("ins .amount").text(c.display_sale_price),s.find("span .amount").text(c.display_price),d.find(".amount").text(c.display_sale_price),c.sku?(r.find(".meta-sku .meta-value").text(c.sku),r.find(".meta-sku").removeClass("d-none")):r.find(".meta-sku").addClass("d-none"),n.find(".hidden-product-id").val(c.id),o.find(".hidden-product-id").val(c.id),i.prop("disabled",!1),c.error_message?(i.prop("disabled",!0),r.find(".number-items-available").html('<span class="text-danger">('.concat(c.error_message,")</span>")).show()):c.success_message?r.find(".number-items-available").html(e.data.stock_status_html).show():r.find(".number-items-available").html("").hide();var u=c.unavailable_attribute_ids||[];r.find(".attribute-swatch-item").removeClass("pe-none"),r.find(".product-filter-item option").prop("disabled",!1),u&&u.length&&u.map((function(e){var t=r.find('.attribute-swatch-item[data-id="'.concat(e,'"]'));t.length?(t.addClass("pe-none"),t.find("input").prop("checked",!1)):(t=r.find('.product-filter-item option[data-id="'.concat(e,'"]'))).length&&t.prop("disabled","disabled").prop("selected",!1)}));var p=r.closest(".product-area").find(".product-gallery"),f="";c.image_with_sizes.origin.forEach((function(e){f+='<a href="'.concat(e,'">\n                        <img title="').concat(c.name,'" title="').concat(c.name,'" src="').concat(siteConfig.img_placeholder?siteConfig.img_placeholder:e,'" data-lazy="').concat(e,'">\n                    </a>')})),p.find(".product-gallery__wrapper").slick("unslick").html(f);var m="";c.image_with_sizes.thumb.forEach((function(e){m+='<img alt="'.concat(c.name,'" title="').concat(c.name,'" src="').concat(siteConfig.img_placeholder?siteConfig.img_placeholder:e,'" data-src="').concat(e,'" data-lazy="').concat(e,'">')})),p.find(".product-thumbnails").slick("unslick").html(m),t.productGallery(!0,p)}}}}},{key:"productGallery",value:function(e,t){if(t&&t.length||(t=$(".product-gallery")),t.length){var a=t.find(".product-gallery__wrapper"),r=t.find(".product-thumbnails");e&&(a.length&&a.hasClass("slick-initialized")&&a.slick("unslick"),r.length&&r.hasClass("slick-initialized")&&r.slick("unslick")),this.lightGallery(t),a.not(".slick-initialized").slick({rtl:NinicoApp.isRtl(),slidesToShow:1,slidesToScroll:1,infinite:!1,asNavFor:r,dots:!1,arrows:!1,lazyLoad:"ondemand"}),r.not(".slick-initialized").slick({rtl:NinicoApp.isRtl(),slidesToShow:7,slidesToScroll:1,infinite:!1,focusOnSelect:!0,asNavFor:a,vertical:!0,nextArrow:'<button class="slick-next slick-arrow"><i class="fas fa-chevron-down"></i></button>',prevArrow:'<button class="slick-prev slick-arrow"><i class="fas fa-chevron-up"></i></button>',responsive:[{breakpoint:768,settings:{slidesToShow:6,vertical:!1}},{breakpoint:480,settings:{slidesToShow:3,vertical:!1}}]})}}},{key:"quickSearchProducts",value:function(){var e=$(".form--quick-search");$("body").on("click",(function(e){$(e.target).closest(".form--quick-search").length||$(".panel--search-result").removeClass("active")}));var t=null;function a(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=a.find(".panel--search-result"),o=a.find(".input-search-product").val();if(o){e.find(".input-search-product").val(o);var i=a.find("button[type=submit]");t=$.ajax({type:"GET",url:r||a.data("url"),dataType:"json",data:r?[]:a.serialize(),beforeSend:function(){i.addClass("loading"),null!==t&&t.abort()},success:function(e){var t=e.error,a=e.data;if(t)n.html("").removeClass("active");else if(r){var o=$("<div>".concat(a,"</div>"));n.find(".panel__content").find(".loadmore-container").remove(),n.find(".panel__content").append(o.find(".panel__content p-3").contents())}else n.html(a).addClass("active")},complete:function(){i.removeClass("loading")}})}else n.html("").removeClass("active")}e.on("keyup",".input-search-product",(function(){a($(this).closest("form"))})),e.on("change",".product-category-select",(function(){a($(this).closest("form"))})),e.on("click",".loadmore",(function(e){e.preventDefault();var t=$(this).closest("form");$(this).addClass("loading"),a(t,$(this).attr("href"))}))}},{key:"addToCart",value:function(e){var t=this;e.preventDefault();var a=$(e.currentTarget);$.ajax({url:a.prop("href"),method:"POST",data:{id:a.data("id")},dataType:"json",beforeSend:function(){a.addClass("loading")},success:function(e){var a=e.error,r=e.message;a?NinicoApp.showError(r):(t.loadAjaxCart(),t.$body.find(".tp-cart-toggle").trigger("click"))},error:function(e){return NinicoApp.handleError(e)},complete:function(){a.removeClass("loading")}})}},{key:"addProductToCart",value:function(e){var t=this;e.preventDefault();var a=$(e.currentTarget),r=a.closest("form.cart-form"),n=r.serializeArray();n.push({name:"checkout",value:"checkout"===a.prop("name")?1:0}),$.ajax({type:"POST",url:r.prop("action"),data:$.param(n),beforeSend:function(){a.addClass("button-loading")},success:function(e){var a=e.error,r=e.message,n=e.data;if(a)return NinicoApp.showError(r),void(void 0!==(null==n?void 0:n.next_url)&&(window.location.href=n.next_url));void 0===(null==n?void 0:n.next_url)?(t.$body.find(".tp-cart-toggle").trigger("click"),t.loadAjaxCart()):window.location.href=n.next_url},error:function(e){NinicoApp.handleError(e)},complete:function(){a.removeClass("button-loading")}})}},{key:"addToCompare",value:function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href"),method:"POST",beforeSend:function(){t.addClass("loading")},success:function(e){var t=e.error,a=e.data,r=e.message;t?NinicoApp.showError(r):(NinicoApp.showSuccess(r),$(".header-cart .tp-product-compare-count").text(a.count))},error:function(e){NinicoApp.handleError(e)},complete:function(){t.removeClass("loading")}})}},{key:"removeFromCompare",value:function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href"),method:"POST",data:{_method:"DELETE"},success:function(e){var t=e.error,a=e.data,r=e.message;t?NinicoApp.showError(r):(NinicoApp.showSuccess(r),$(".header-cart .tp-product-compare-count").text(a.count),$(".compare-area").load(window.location.href+" .compare-area > *"))},error:function(e){NinicoApp.handleError(e)}})}},{key:"removeFromCart",value:function(e){var t=this;e.preventDefault();var a=$(e.currentTarget);$.ajax({url:a.data("url"),method:"GET",beforeSend:function(){a.addClass("loading")},success:function(e){var a;if(e.error)NinicoApp.showError(e.message);else{var r=$(".cart-area");r.length&&null!==(a=window.siteConfig)&&void 0!==a&&a.cartUrl&&r.load(window.siteConfig.cartUrl+" .cart-area > *"),t.loadAjaxCart()}},error:function(e){NinicoApp.showError(e.message)},complete:function(){a.removeClass("loading")}})}},{key:"addToWishlist",value:function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href"),method:"POST",beforeSend:function(){t.addClass("loading")},success:function(e){var a=e.error,r=e.message,n=e.data;a?NinicoApp.showError(r):(NinicoApp.showSuccess(r),$(".header-cart .tp-product-wishlist-count").text(n.count),n.added?t.find("i").removeClass("fal").addClass("fas"):t.find("i").removeClass("fas").addClass("fal"))},error:function(e){NinicoApp.handleError(e)},complete:function(){t.removeClass("loading")}})}},{key:"removeFromWishlist",value:function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href"),method:"POST",data:{_method:"DELETE"},success:function(e){e.error?NinicoApp.showError(e.message):(NinicoApp.showSuccess(e.message),$(".header-cart .tp-product-wishlist-count").text(e.data.count),$(".wishlist-area").load(window.location.href+" .wishlist-area > *"))},error:function(e){NinicoApp.handleError(e)}})}},{key:"loadAjaxCart",value:function(){var e,t=this;null!==(e=window.siteConfig)&&void 0!==e&&e.ajaxCart&&$.ajax({url:window.siteConfig.ajaxCart,method:"GET",success:function(e){var a=e.data;e.error||(t.$body.find(".tpcartinfo .tpcart__product").html(a.html),t.$body.find(".header-cart .tp-product-count").text(a.count))}})}},{key:"applyCouponCode",value:function(e){e.preventDefault();var t=$(e.currentTarget),a=t.closest(".coupon").find("#coupon_code").val();$.ajax({url:t.data("url"),type:"POST",data:{coupon_code:a},beforeSend:function(){t.prop("disabled",!0).addClass("loading")},success:function(e){e.error?NinicoApp.showError(e.message):$(".cart-area").load(window.location.href+"?applied_coupon=1 .cart-area > *",(function(){t.prop("disabled",!1).removeClass("loading"),NinicoApp.showSuccess(e.message)}))},error:function(e){NinicoApp.handleError(e)},complete:function(e){var a;(200!==e.status||null!=e&&null!==(a=e.responseJSON)&&void 0!==a&&a.error)&&t.prop("disabled",!1).removeClass("loading")}})}},{key:"removeCouponCode",value:function(e){e.preventDefault();var t=$(e.currentTarget),a=t.text();t.text(t.data("loading-text")),$.ajax({url:t.prop("href"),type:"POST",success:function(e){e.error?NinicoApp.showError(e.message):$(".cart-area").load(window.location.href+" .cart-area > *",(function(){t.text(a)}))},error:function(e){NinicoApp.handleError(e)},complete:function(e){var r;(200!==e.status||null!=e&&null!==(r=e.responseJSON)&&void 0!==r&&r.error)&&t.text(a)}})}},{key:"changeCartQuantity",value:function(e){var t=$(e.target),a=t.parent().find("input"),r=parseInt(a.attr("step"),10),n=parseInt(a.attr("min"),10),o=parseInt(a.attr("max"),10),i=parseInt(a.val(),10);t.hasClass("cart-minus")&&i>n&&(a.val(i-r),a.change()),t.hasClass("cart-plus")&&i<o&&(a.val(i+r),a.change()),this.updateCart(e)}},{key:"onChangeQuantityInput",value:function(e){var t=$(e.target),a=parseInt(t.attr("min"),10),r=parseInt(t.attr("max"),10),n=parseInt(t.val(),10);n<a&&t.val(a),n>r&&t.val(r),this.updateCart(e)}},{key:"updateCart",value:function(e){var t=this;e.preventDefault();var a=this.$body.find(".cart-form");a.length&&$.ajax({type:"POST",cache:!1,url:a.prop("action"),data:new FormData(a[0]),contentType:!1,processData:!1,success:function(e){var a=e.error,r=e.message;a?NinicoApp.showError(r):($(".cart-area").load(window.siteConfig.cartUrl+" .cart-area > *"),t.loadAjaxCart(),NinicoApp.showSuccess(r))},error:function(e){NinicoApp.handleError(e)}})}},{key:"handleProductsPagination",value:function(e){e.preventDefault();var t=new URL($(e.currentTarget).attr("href")).searchParams.get("page");this.$productsFilter.find('input[name="page"]').val(t),this.filterProducts(this.$productsFilter,t)}},{key:"handleProductsSorting",value:function(e){var t=$(e.currentTarget);this.$productsFilter.find('input[name="sort-by"]').val(t.val()).change()}},{key:"handleProductsPerPage",value:function(e){var t=$(e.currentTarget);this.$productsFilter.find('input[name="per-page"]').val(t.val()).change()}},{key:"handleProductsLayout",value:function(e){var t=$(e.currentTarget);t.addClass("active"),t.siblings().removeClass("active"),this.$productsFilter.find('input[name="layout"]').val(t.data("type")).change()}},{key:"filterProducts",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a&&e.find("input[name=page]").val(a),$.ajax({url:"".concat(e.prop("action"),"?").concat(e.serialize()),type:"GET",beforeSend:function(){t.$body.find(".product-filter-mobile").removeClass("active"),t.$body.find(".loading-spinner").removeClass("d-none"),$("html, body").animate({scrollTop:$(".product-area").offset().top-100})},success:function(a){var r=a.error,n=a.message,o=a.data,i=a.additional;if(t.$body.find(".product-list").html(o),t.$body.find(".product-item-count span").text(n),null!=i&&i.breadcrumb&&$(".page-breadcrumbs div").html(i.breadcrumb),null!=i&&i.filters_html){var c=e.find(".product-categories-filter-widget .product-sidebar__widget").clone();e.html(i.filters_html),e.find(".product-categories-filter-widget .product-sidebar__widget").replaceWith(c),t.priceFilter()}r?NinicoApp.showError(n||"Opp!"):window.history.pushState({},"","".concat(window.location.pathname,"?").concat(e.serialize()))},error:function(e){NinicoApp.handleError(e)},complete:function(){t.$body.find(".loading-spinner").addClass("d-none")}})}},{key:"priceFilter",value:function(){var e=$(document).find("#slider-range");if(e.length){var t=e.data("min"),a=e.data("max"),r=$(document).find(".price-filter");e.slider({range:!0,min:t,max:a,values:[r.find('input[name="min_price"]').val(),r.find('input[name="max_price"]').val()],slide:function(e,t){r.find("#amount").text("".concat(t.values[0].format_price()," - ").concat(t.values[1].format_price()))},change:function(e,t){r.find('input[name="min_price"]').val(t.values[0]),r.find('input[name="max_price"]').val(t.values[1]).trigger("change")}}),r.find("#amount").text("".concat(e.slider("values",0).format_price()," - ").concat(e.slider("values",1).format_price()))}}},{key:"lightGallery",value:function(e){e.data("lightGallery")&&e.data("lightGallery").destroy(!0),e.lightGallery({selector:"a",thumbnail:!0,share:!1,fullScreen:!1,autoplay:!1,autoplayControls:!1,actualSize:!1})}},{key:"reviewSection",value:function(){var e=this.$body.find(".comment-list"),t=this.$body.find(".loading-spinner");"#reviews"===window.location.hash&&$(document).find(".tpproduct-details__reviewers").trigger("click"),t.addClass("d-none");var a=$(".product-review-images");a.length>0&&this.lightGallery(a);var r=this,n=function(a){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$.ajax({url:a,type:"GET",beforeSend:function(){t.removeClass("d-none"),n&&$("html, body").animate({scrollTop:"".concat($(".product-reviews-container").offset().top,"px")},1500)},success:function(t){var a=t.data;e.html(a);var n=$(".product-reviews-container .review-images");n.length>0&&r.lightGallery(n)},complete:function(){t.addClass("d-none")}})};if(!(e.length<1)){n(e.data("url")),e.on("click",".basic-pagination li a",(function(e){e.preventDefault();var t=$(this).prop("href");"#"!==t&&n(t,!0)}));var o=[],i=function(e){for(var t=new ClipboardEvent("").clipboardData||new DataTransfer,a=0,r=o;a<r.length;a++){var n=r[a];t.items.add(n)}e.files=t.files,c(e)},c=function(e){var t=$(".image-upload__text"),a=$(e).data("max-files"),r=e.files.length;a?(r>=a?t.closest(".image-upload__uploader-container").addClass("d-none"):t.closest(".image-upload__uploader-container").removeClass("d-none"),t.text(r+"/"+a)):t.text(r);var n=$(".image-viewer__list"),o=$("#review-image-template").html();if(n.addClass("is-loading"),n.find(".image-viewer__item").remove(),r){for(var i=r-1;i>=0;i--)n.prepend(o.replace("__id__",i));for(var c=function(t){var a=new FileReader;a.onload=function(e){n.find(".image-viewer__item[data-id="+t+"]").find("img").attr("src",e.target.result)},a.readAsDataURL(e.files[t])},l=r-1;l>=0;l--)c(l)}n.removeClass("is-loading")};$(document).on("change",".form-review-product input[type=file]",(function(e){e.preventDefault();var t=this,a=$(t),r=a.data("max-size");Object.keys(t.files).map((function(e){if(r&&t.files[e].size/1024>r){var n=a.data("max-size-message").replace("__attribute__",t.files[e].name).replace("__max__",r);NinicoApp.showError(n)}else o.push(t.files[e])}));var n=o.length,c=a.data("max-files");c&&n>c&&o.splice(n-c-1,n-c),i(t)})),$(document).on("click",".form-review-product .image-viewer__icon-remove",(function(e){e.preventDefault();var t=$(e.currentTarget).closest(".image-viewer__item").data("id");o.splice(t,1);var a=$(".form-review-product input[type=file]")[0];i(a)})),$(document).on("submit",".form-review-product",(function(t){t.preventDefault(),t.stopPropagation();var a=$(t.currentTarget),r=a.find("button[type=submit]");$.ajax({type:"POST",cache:!1,url:a.prop("action"),data:new FormData(a[0]),contentType:!1,processData:!1,beforeSend:function(){r.prop("disabled",!0).addClass("button-loading")},success:function(t){var r=t.error,i=t.message;if(!r)return a.find("input[type=file]").val(""),a.find("textarea").val(""),o.splice(0,o.length),c(a.find("input[type=file]")[0]),NinicoApp.showSuccess(i),void n(e.data("url"));NinicoApp.showError(i)},error:function(e){NinicoApp.handleError(e)},complete:function(){r.prop("disabled",!1).removeClass("button-loading")}})}))}}},{key:"quickView",value:function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href"),type:"GET",beforeSend:function(){t.addClass("loading")},success:function(e){var t=e.data;$("#quick-view-popup").html(t),$.magnificPopup.open({items:{src:"#quick-view-popup"},type:"inline"}),$(".thumbnails .images").slick({slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!0,adaptiveHeight:!1,rtl:NinicoApp.isRtl()})},error:function(e){NinicoApp.handleError(e)},complete:function(){t.removeClass("loading")}})}},{key:"quickShop",value:function(e){e.preventDefault();var t=$(e.currentTarget);$.ajax({url:t.prop("href"),type:"GET",beforeSend:function(){t.addClass("loading")},success:function(e){var t=e.data;$("#quick-shop-popup").html(t),$.magnificPopup.open({items:{src:"#quick-shop-popup"},type:"inline"})},error:function(e){NinicoApp.handleError(e)},complete:function(){t.removeClass("loading")}})}}],n&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();$(document).ready((function(){(new n).init()}))})();